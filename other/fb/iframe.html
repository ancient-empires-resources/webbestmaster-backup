<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>

	<!-- mobile device -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

</head>
<body>


<script type="text/javascript">
	(function() {
		var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		po.src = 'https://apis.google.com/js/client:plusone.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	})();
</script>

<button onclick="javscript: gapi.auth.signOut();">logout</button>
<button onclick="javscript: getEmail();">get e-mail</button>

<script type="text/javascript">

	function signinCallback(authResult) {
		if (authResult['access_token']) {

//			alert(JSON.stringify(authResult));

			// Успешная авторизация
			// Скрыть кнопку входа после авторизации пользователя, например:
			document.getElementById('signinButton').setAttribute('style', 'display: none');


			getEmail();

		} else if (authResult['error']) {
			alert('log out');
			// Произошла ошибка.
			// Возможные коды ошибок:
			//   "access_denied" – пользователь отказался предоставить приложению доступ к данным
			//   "immediate_failed" – не удалось выполнить автоматический вход пользователя
			// console.log('There was an error: ' + authResult['error']);
		}
	}

	function getEmail(){
		// Загружает библиотеки oauth2 для активации методов userinfo.
		gapi.client.load('oauth2', 'v2', function() {
			var request = gapi.client.oauth2.userinfo.get();
			request.execute(getEmailCallback);
		});
	}

	function getEmailCallback(obj){
		alert(JSON.stringify(obj));
	}

</script>


<span id="signinButton">

  <span
		  class="g-signin"
		  data-callback="signinCallback"
		  data-clientid="318371264940-fm4d2matpc7kei3a0kf5rko51c3kvcot.apps.googleusercontent.com"
		  data-scope="https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email"
		  data-height="short"
		  data-cookiepolicy="http://statlex.com/">
  </span>

</span>


















<h1>iframe</h1>


<script>
	window.fbAsyncInit = function() {
		FB.init({
			appId      : '1617325145216800',
			xfbml      : true,
			version    : 'v2.3'
		});

		FB.getLoginStatus(function(response) {
			if (response.status === 'connected') {
				// the user is logged in and has authenticated your
				// app, and response.authResponse supplies
				// the user's ID, a valid access token, a signed
				// request, and the time the access token
				// and signed request each expire
				alert('connected');
				alert(JSON.stringify(response));


				FB.api('/me', function(response) {
					alert(JSON.stringify(response));
				});

				var uid = response.authResponse.userID;
				var accessToken = response.authResponse.accessToken;
			} else if (response.status === 'not_authorized') {
				alert('not_authorized');
				// the user is logged in to Facebook,
				// but has not authenticated your app
			} else {
//				alert('isn\'t logged in to Facebook');
				// the user isn't logged in to Facebook.
			}
		});

		var login_event = function(response) {
			alert("login_event");
			console.log(response.status);
			console.log(response);
		}

		var logout_event = function(response) {
			alert("logout_event");
			console.log(response.status);
			console.log(response);
		}

		FB.Event.subscribe('auth.login', login_event);
		FB.Event.subscribe('auth.logout', logout_event);

	};

	(function(d, s, id){
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) {return;}
		js = d.createElement(s); js.id = id;
		js.src = "//connect.facebook.net/en_US/sdk.js";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
</script>


<input type="button" value="Login" onclick="FB.login();">
<input type="button" value="Logout" onclick="FB.logout();">



<script type="text/javascript">


	var handleSizingResponse = function(e) {
//		alert('from - parent ' + JSON.stringify(e.data));

//		setTimeout(function () {
//			window.parent.postMessage('from iframe', "*");
//		}, 5e3);

//		if(e.origin == 'http://remote-domain.com') {
//			var action = e.data.split(':')[0]
//			if(action == 'sizing') {
//				resizeCanvas(e.data.split(':')[1]);
//			} else {
//				console.log("Unknown message: "+e.data);
//			}
//		}

	}

	window.addEventListener('message', handleSizingResponse, false);







</script>


</body>
</html>