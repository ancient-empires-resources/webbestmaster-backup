<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>AE2</title>

	<!-- mobile device -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<!-- keywords and description -->
	<meta name="keywords" content="">
	<meta name="description" content="">

	<!-- styles -->
	<link rel="stylesheet" href="css/main.css"/>

	<!-- languages -->
	<script src="js/i18n/en.js" type="text/javascript"></script>
	<script src="js/i18n/ru.js" type="text/javascript"></script>

	<!-- libs and services -->
	<script src="js/lib/shim.js" type="text/javascript"></script>
	<script src="js/lib/jquery-2.1.3.js" type="text/javascript"></script>
	<script src="js/lib/jquery.finger-0.1.2.js" type="text/javascript"></script>
	<script src="js/lib/jquery.mousewheel.js" type="text/javascript"></script>
	<script src="js/lib/fastclick.js" type="text/javascript"></script>
	<script src="js/lib/underscore.js" type="text/javascript"></script>
	<script src="js/lib/backbone.js" type="text/javascript"></script>
	<script src="js/services/info.js" type="text/javascript"></script>
	<script src="js/services/lang.js" type="text/javascript"></script>
	<script src="js/services/template-master.js" type="text/javascript"></script>
	<script src="js/services/util.js" type="text/javascript"></script>
	<script src="js/services/log.js" type="text/javascript"></script>
	<script src="js/lib/mover.js" type="text/javascript"></script>

	<!-- router -->
	<script src="js/app/router/router.js" type="text/javascript"></script>

	<!-- maps -->
	<script src="js/app/map/map.js" type="text/javascript"></script>
	<script src="js/app/map/map-tiles.js" type="text/javascript"></script>
	<script src="js/app/map/skirmish/island-cross.js" type="text/javascript"></script>
	<script src="js/app/map/skirmish/rocky-bay.js" type="text/javascript"></script>

	<!-- views -->
	<script src="js/app/view/base.js" type="text/javascript"></script>
	<script src="js/app/view/title.js" type="text/javascript"></script>
	<script src="js/app/view/popup.js" type="text/javascript"></script>
	<script src="js/app/view/rate.js" type="text/javascript"></script>
	<script src="js/app/view/settings.js" type="text/javascript"></script>
	<script src="js/app/view/play.js" type="text/javascript"></script>
	<script src="js/app/view/about.js" type="text/javascript"></script>
	<script src="js/app/view/instructions.js" type="text/javascript"></script>
	<script src="js/app/view/load-game.js" type="text/javascript"></script>
	<script src="js/app/view/select-level.js" type="text/javascript"></script>
	<script src="js/app/view/skirmish-select-map.js" type="text/javascript"></script>
	<script src="js/app/view/skirmish-setup-map.js" type="text/javascript"></script>
	<script src="js/app/view/battle.js" type="text/javascript"></script>
	<script src="js/app/view/unit-store.js" type="text/javascript"></script>

	<!-- model -->
	<script src="js/app/model/device.js" type="text/javascript"></script>
	<script src="js/app/model/battle.js" type="text/javascript"></script>

	<!-- unit data and models -->
	<script src="js/app/model/unit/master-unit.js" type="text/javascript"></script>
	<script src="js/app/model/unit/base-unit.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-archer.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-catapult.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-demon-lord.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-dire-wolf.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-dragon.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-elemental.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-galamar.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-golem.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-saeth.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-skeleton.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-soldier.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-sorceress.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-valadorn.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-valadorn.js" type="text/javascript"></script>
	<script src="js/app/model/unit/unit-wisp.js" type="text/javascript"></script>

	<script src="js/app/model/building.js" type="text/javascript"></script>

	<!-- start app -->
	<script src="js/app/main.js" type="text/javascript"></script>

</head>
<body>

<div class="js-wrapper">

	<!-- main content here -->

</div>

<script type="text/x-template" data-name="header">

	<div class="main-header-wrapper clear-fix">

		<div class="main-header"><%= (obj && obj.header) || window.APP.lang.get('appName') %></div>

		<% if ( window.location.hash ) { %>
		<div class="js-back back">&lt;&lt;</div>
		<% } else if ( window.APP.info.withAds && window.APP.info.get('isIOS', true) ) { %>
		<a href="<%= window.APP.info.link.ios.pro %>" class="js-external-link no-ads">&nbsp;</a>
		<% }; %>

	</div>

</script>

<script type="text/x-template" data-name="title">

	<div>

		<button data-route="play">{{ play }}</button>
		<br/>
		<button class="opacity50">{{ online }}</button>
		<br/>
		<button data-route="settings">{{ settings }}</button>
		<br/>
		<button data-route="instructions">{{ instructions }}</button>
		<br/>
		<button data-route="about">{{ about }}</button>
		<br/>

	</div>

</script>


<script type="text/x-template" data-name="settings">

	<div>

		<h1>{{ settings }}</h1>

		<div>{{ confirmTurn }}
			<div><%= view.tmpl.settingsOnOff({ key: 'confirmTurn', info: info }) %></div>
		</div>
		<div>{{ confirmMove }}
			<div><%= view.tmpl.settingsOnOff({ key: 'confirmMove', info: info }) %></div>
		</div>
		<div>{{ confirmAttack }}
			<div><%= view.tmpl.settingsOnOff({ key: 'confirmAttack', info: info }) %></div>
		</div>
		<div>{{ music }}
			<div><%= view.tmpl.settingsOnOff({ key: 'music', info: info }) %></div>
		</div>
		<div>{{ vibrate }}
			<div><%= view.tmpl.settingsOnOff({ key: 'vibrate', info: info }) %></div>
		</div>
		<div>{{ help }}
			<div><%= view.tmpl.settingsOnOff({ key: 'help', info: info }) %></div>
		</div>
		<div>{{ fightAnimation }}
			<div><%= view.tmpl.settingsOnOff({ key: 'fightAnimation', info: info }) %></div>
		</div>

		<div>{{ language }}
			<div>

				<% _.each(info.availableLanguages, function(lang) { %>

				<% if ( lang === info.get('language') ) { %>
				<div class="js-change-select-setting" data-key="language" data-value="<%= lang %>">
					<%= window.APP.languages[lang].shortLanguageName %>
				</div>
				<% } else { %>
				<div class="opacity50 js-change-select-setting" data-key="language" data-value="<%= lang %>">
					<%= window.APP.languages[lang].shortLanguageName %>
				</div>
				<% }; %>


				<% }); %>

			</div>
		</div>

		<div>{{ gameSpeed }}

			<div>

				<% _.each(['1', '2', '3', '4', '5'], function(speed){ %>

				<% if ( speed === info.get('gameSpeed') ) { %>
				<div class="js-change-select-setting" data-key="gameSpeed" data-value="<%= speed %>">
					<%= speed %>
				</div>
				<% } else { %>
				<div class="opacity50 js-change-select-setting" data-key="gameSpeed" data-value="<%= speed %>">
					<%= speed %>
				</div>
				<% }; %>

				<% }); %>

			</div>

		</div>

	</div>

</script>

<script type="text/x-template" data-name="settingsOnOff">

	<div>

		<% if (info.get(key) === 'on') { %>
		<div class="js-change-on-off-setting" data-key="<%= key %>" data-value="on"> {{ on }}</div>
		<% } else { %>
		<div class="js-change-on-off-setting" data-key="<%= key %>" data-value="off"> {{ off }}</div>
		<% }; %>

	</div>

</script>

<script type="text/x-template" data-name="about">

	<div>

		<h1>{{ about }}</h1>

		<p>{{ aboutText }}</p>

	</div>

</script>

<script type="text/x-template" data-name="play">

	<div>

		<button class="opacity50">{{ newGame }}</button>
		<button data-route="load-game">{{ loadGame }}</button>
		<button data-route="select-level">{{ selectLevel }}</button>
		<button data-route="skirmish-select-map">{{ skirmish }}</button>

	</div>

</script>

<script type="text/x-template" data-name="end-turn-popup">

	<div>

		<div class="popup-header">{{ endTurnQuestion }}</div>

		<div class="popup-buttons-wrapper ta-center">
			<div class="popup-button js-confirmed-end-turn">{{ yes }}</div>
			<div class="popup-button js-back">{{ no }}</div>
		</div>
	</div>

</script>

<script type="text/x-template" data-name="popup-wrapper">

	<div class="js-popup-wrapper popup-wrapper">

		<div class="table popup-wrapper-table js-back">

			<div class="table-row">
				<div class="table-cell">

					<div class="popup-container">

						<div class="popup-form js-popup-container">


						</div>

					</div>

				</div>
			</div>

		</div>

	</div>

</script>

<script type="text/x-template" data-name="loadGame">

	<div>

		<h1>{{ loadGame }}</h1>

		<ul>
			<li>saved game name 1</li>
			<li>saved game name 2</li>
			<li>saved game name 3</li>
			<li>saved game name 4</li>
		</ul>

	</div>

</script>

<script type="text/x-template" data-name="skirmishSetupMap">

	<div>

		<% _.each(playersData, function(player, index){ %>

		<div class="js-player-info-wrapper">

			<span class="js-player-color" data-player-color="<%= player.color %>"> <%= window.APP.lang.get(player.color) %> </span>

			<span>
				<span class="js-list-backward" data-group-name="team-number-<%= index %>"> <- </span>
				<span class="js-list-changed-item js-player-team-number" data-group-name="team-number-<%= index %>" data-full-list="<%= list.teamNumber %>" data-key="<%= player.teamNumber %>"> <%= player.teamNumber %> </span>
				<span class="js-list-forward" data-group-name="team-number-<%= index %>"> -> </span>
			</span>

			<span>
				<span class="js-list-backward" data-group-name="player-type-<%= index %>"> <- </span>
				<span class="js-list-changed-item js-player-type" data-group-name="player-type-<%= index %>" data-full-list="<%= list.playerTypes %>" data-key="<%= player.type %>"> <%= window.APP.lang.get(player.type) %> </span>
				<span class="js-list-forward" data-group-name="player-type-<%= index %>"> -> </span>
			</span>

		</div>

		<% }); %>

		<div>
			<span>{{ money }}</span>

			<span>
				<span class="js-list-backward" data-group-name="money"> <- </span>
				<span class="js-list-changed-item js-money" data-group-name="money" data-full-list="<%= list.money %>" data-key="<%= money %>"> <%= money %> </span>
				<span class="js-list-forward" data-group-name="money"> -> </span>
			</span>

		</div>

		<div>
			<span>{{ unitLimit }}</span>

			<span>
				<span class="js-list-backward" data-group-name="unit-limit"> <- </span>
				<span class="js-list-changed-item js-unit-limit" data-group-name="unit-limit" data-full-list="<%= list.unitsLimits %>" data-key="<%= unitLimit %>"> <%= unitLimit %> </span>
				<span class="js-list-forward" data-group-name="unit-limit"> -> </span>
			</span>

		</div>

		<button class="js-go-to-battle">{{ fight }}!</button>

	</div>

</script>

<script type="text/x-template" data-name="skirmishSelectMap">

	<div>

		<h1>{{ skirmish }}</h1>

		<% var languageField = 'name-' + window.APP.info.get('language'); %>

		<% _.each(window.APP.maps, function (map, jsKey) { %>
		<% if (map.type === 'skirmish') { %>
		<% var mapName = map[languageField] || map.name; %>
		<div data-route="skirmish-setup-map/<%= jsKey %>" class="js-setup-skirmish-map">(<%= map.maxPlayers %>) <%= mapName %></div>
		<% }; %>
		<% }); %>

	</div>

</script>

<script type="text/x-template" data-name="battle">

	<div class="battle-view-wrapper">
		<div class="battle-view-container">
			<div class="battle-view-inner-container js-move-area-wrapper js-no-scroll">
				<div class="js-move-area-container">
					<div class="js-main-event-handler main-event-handler"></div>
					<div class="js-event-handler-wrapper event-handler-wrapper"></div>
					<div class="js-smoke-wrapper smoke-wrapper"></div>
					<div class="units-wrapper js-units-wrapper"></div>
					<div class="building-wrapper js-building-wrapper"></div>
					<canvas class="js-map-image-wrapper block"></canvas>
				</div>
			</div>
		</div>
		<div class="js-store-wrapper"></div>
		<div class="js-end-turn end-turn">&gt;|</div>
		<div class="battle-view-status-bar js-battle-view-status-bar"></div>
		<div class="js-view-disable view-disable js-no-scroll hidden"></div>
		<style type="text/css" class="js-style-square-size"></style>
	</div>

</script>

<script type="text/x-template" data-name="battle-view-status-bar">

	<div class="status-bar-info-square-wrapper js-status-bar-info-square-wrapper">
		<div class="status-bar-info-square-border">
			&nbsp;
		</div>
	</div>
	<div class="status-bar-player-info-wrapper status-bar-bg-color-<%= color %>">
		<div class="status-bar-player-info-container">
			<div class="status-bar-money">

				<% var arr = ['icon-money', 'space'].concat(String(money).split('')); %>
				<% _.each(arr, function(sign) { %>
				<div class="status-bar-sign-block" style="background-image: url(i/fonts/numbers-2-<%= sign %>.png);">
					<img src="i/fonts/numbers-2-<%= sign %>.png" alt="" class="status-bar-sign"/>
					<span class="add-more-sharp">&nbsp;</span>
				</div>
				<% }); %>

			</div>
			<div class="status-bar-units">

				<% arr = ['icon-unit', 'space'].concat(String(unitCount).split('')).concat(['space', 'slash', 'space']).concat(String(unitLimit).split('')); %>
				<% _.each(arr, function(sign) { %>
				<div class="status-bar-sign-block" style="background-image: url(i/fonts/numbers-2-<%= sign %>.png);">
					<img src="i/fonts/numbers-2-<%= sign %>.png" alt="" class="status-bar-sign"/>
					<span class="add-more-sharp">&nbsp;</span>
				</div>
				<% }); %>

			</div>
		</div>
	</div>

</script>

<script type="text/x-template" data-name="battle-view-info-square">

	<div class="status-bar-info-square-container js-status-bar-info-square-container">
		<div class="<%= className %> status-bar-square-info-image">
			&nbsp;
			<div class="status-bar-sign-square-wrapper">
				<% arr = ['def', 'space'].concat(String(armor).split('')); %>
				<% _.each(arr, function(sign) { %>
				<div class="status-bar-sign-square-info-block" style="background-image: url(i/fonts/numbers-1-<%= sign %>.png);">
					<img src="i/fonts/numbers-1-<%= sign %>.png" alt="" class="square-info-sign"/>
					<span class="add-more-sharp">&nbsp;</span>
				</div>
				<% }); %>
			</div>
		</div>

	</div>


</script>

<script type="text/x-template" data-name="unit-store">

	<div class="js-unit-store-wrapper unit-store-wrapper">

		<%= window.APP.templateMaster.tmplFn.header({ header: window.APP.lang.get('unitStoreHeader') }) %>

		<div class="main-content-wrapper">
			<div class="main-content-container js-scroll-area-container scroll-touch">
				<div class="scroll-area">

					<% var unitsData = window.APP.unitMaster, langUnits = window.APP.lang.get('unitsList'); %>
					<% _.each(window.APP.unitMaster.list, function(unitData, key) { %>

					<% var isCommander = _.contains(unitsData.commanderList, key); %>

					<% if ( unitData.canNotBeBuy ) { %>
						<% return; %>
					<% }; %>

					<% if ( isCommander && key !== commander.name ) { %>
						<% return; %>
					<% }; %>

					<div class="unit-card-wrapper js-unit-card clear-fix disabled-card" data-is-commander="<%= isCommander %>" data-unit-card-name="<%= key %>">

						<div class="unit-card-header"><%= langUnits[unitData.langKey].name %>
							<span class="buy-unit-count js-buy-unit-count hidden" data-unit-count="0" data-unit-key="<%= key %>"></span>
						</div>

						<div class="unit-shot-info-wrapper clear-fix js-show-unit-description" data-description-is-show="no" data-unit-key="<%= key %>">
							<div class="unit-shot-info-image">
								<div class="unit-image unit-image-<%= key %>-<%= playerColor %>">&nbsp;</div>
							</div>
							<div class="unit-shot-info-properties">
								<div class="unit-shot-info-attack"><%= unitData.atk.min %>-<%= unitData.atk.max %></div>
								<div class="clear"></div>
								<div class="unit-shot-info-defence"><%= unitData.def %></div>
								<div class="unit-shot-info-move"><%= unitData.mov %></div>
							</div>
						</div>

						<div class="unit-buy-button js-buy-unit" data-unit-key="<%= key %>">
							<%= unitData.cost %>
						</div>
						<div class="clear"></div>
						<div class="js-description-unit-info description-unit-info hidden" data-unit-key="<%= key %>">
							<%= langUnits[unitData.langKey].description %>
						</div>

					</div>

					<% }); %>

				</div>
			</div>
		</div>


	</div>

</script>

<script type="text/x-template" data-name="selectLevel">

	<div>

		<h1>{{ selectLevel }}</h1>

		<ul>
			<li>open level 1</li>
			<li>open level 2</li>
			<li>open level 3</li>
			<li>open level 4</li>
		</ul>

	</div>

</script>

<script type="text/x-template" data-name="instructions">

	<div>

		<h1>{{ instructions }}</h1>

		<% _.each(window.APP.lang.get('instructionsText'), function(part) { %>
		<p><%= part %></p>
		<% }); %>

	</div>

</script>

<!--<script type="text/x-template" data-name="event-handler">-->

	<!--<div class="js-square js-event-square square" style="<%= pre %>transform: translate3d(<%= x * squareSize %>px, <%= y * squareSize %>px, 0);" data-xy="x<%= x %>y<%= y %>" data-x="<%= x %>" data-y="<%= y %>">&nbsp;</div>-->

<!--</script>-->

<script type="text/x-template" data-name="rate">

	<div class="js-popup-wrapper popup-wrapper">
		<div class="table popup-wrapper-table js-back">
			<div class="table-row">
				<div class="table-cell">
					<div class="popup-container clear-fix">

						<div class="js-stop-event popup-form clear-fix">
							<% var rateUs = window.APP.lang.get('rateUs'); %>
							<p class="popup-text"><%= rateUs.header %></p>

							<div class="width-50 float-left">
								<div class="popup-button js-back">
									<%= rateUs.notNow %>
								</div>
							</div>
							<div class="width-50 float-left">
								<a class="popup-button js-five-stars js-external-link" href="<%= link %>">
									<%= rateUs.fiveStars %>
								</a>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>

</script>

</body>
</html>